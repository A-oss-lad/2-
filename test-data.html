<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试数据生成 - 江西粤东气象社区交流安全中心</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',
                        secondary: '#3b82f6',
                        accent: '#f59e0b',
                        danger: '#dc2626',
                        success: '#10b981',
                        light: '#f3f4f6',
                        dark: '#1f2937'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .bg-gradient-primary {
                background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .transition-all-300 {
                transition: all 300ms ease-in-out;
            }
        }
    </style>
    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: #f8fafc;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e5e7eb;
        }
        .title {
            font-size: 24px;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 8px;
        }
        .subtitle {
            color: #6b7280;
        }
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
        }
        .btn {
            flex: 1;
            min-width: 200px;
            padding: 12px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn i {
            margin-right: 8px;
        }
        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }
        .btn-primary:hover {
            background-color: #2563eb;
        }
        .btn-success {
            background-color: #10b981;
            color: white;
        }
        .btn-success:hover {
            background-color: #059669;
        }
        .btn-warning {
            background-color: #f59e0b;
            color: white;
        }
        .btn-warning:hover {
            background-color: #d97706;
        }
        .btn-danger {
            background-color: #dc2626;
            color: white;
        }
        .btn-danger:hover {
            background-color: #b91c1c;
        }
        .log-container {
            background-color: #f9fafb;
            border-radius: 6px;
            padding: 16px;
            height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        .log-entry {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #f3f4f6;
        }
        .log-timestamp {
            color: #6b7280;
            margin-right: 8px;
        }
        .log-success {
            color: #10b981;
        }
        .log-warning {
            color: #f59e0b;
        }
        .log-error {
            color: #dc2626;
        }
        .footer {
            margin-top: 20px;
            text-align: center;
            color: #6b7280;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">测试数据生成工具</h1>
            <p class="subtitle">为江西粤东气象社区交流安全中心生成测试数据</p>
        </div>
        
        <div class="button-group">
            <button class="btn btn-primary" id="create-users">
                <i class="fa fa-user-plus"></i> 创建测试用户
            </button>
            <button class="btn btn-success" id="create-reports">
                <i class="fa fa-flag"></i> 创建测试举报
            </button>
            <button class="btn btn-warning" id="create-punishments">
                <i class="fa fa-gavel"></i> 创建测试处罚
            </button>
            <button class="btn btn-danger" id="create-appeals">
                <i class="fa fa-exclamation-circle"></i> 创建测试申诉
            </button>
            <button class="btn btn-danger" id="clear-data">
                <i class="fa fa-trash"></i> 清除所有数据
            </button>
        </div>
        
        <div class="log-container" id="log-container">
            <div class="log-entry">
                <span class="log-timestamp">[系统]</span> 测试数据生成工具已准备就绪
            </div>
        </div>
        
        <div class="footer">
            <p>使用说明：点击上方按钮生成对应类型的测试数据，生成结果将显示在日志区域。</p>
        </div>
    </div>

    <script>
        // 日志记录函数
        function log(message, type = 'info') {
            const logContainer = document.getElementById('log-container');
            const timestamp = new Date().toLocaleTimeString('zh-CN');
            
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            
            let logClass = '';
            switch (type) {
                case 'success':
                    logClass = 'log-success';
                    break;
                case 'warning':
                    logClass = 'log-warning';
                    break;
                case 'error':
                    logClass = 'log-error';
                    break;
            }
            
            logEntry.innerHTML = `
                <span class="log-timestamp">[${timestamp}]</span>
                <span class="${logClass}">${message}</span>
            `;
            
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        // 创建测试用户
        function createTestUsers() {
            // 清除现有用户数据
            localStorage.removeItem('users');
            
            // 创建测试用户
            const users = [
                {
                    id: 'user1',
                    username: '气象爱好者01',
                    qqNumber: '123456789',
                    password: '123456',
                    avatar: 'https://randomuser.me/api/portraits/men/1.jpg',
                    role: 'user',
                    status: 'normal',
                    joinDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
                    lastLogin: new Date().toISOString()
                },
                {
                    id: 'user2',
                    username: '天气观测员',
                    qqNumber: '987654321',
                    password: '123456',
                    avatar: 'https://randomuser.me/api/portraits/women/2.jpg',
                    role: 'user',
                    status: 'normal',
                    joinDate: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
                    lastLogin: new Date().toISOString()
                },
                {
                    id: 'user3',
                    username: '违规用户01',
                    qqNumber: '456789123',
                    password: '123456',
                    avatar: 'https://randomuser.me/api/portraits/men/3.jpg',
                    role: 'user',
                    status: 'banned',
                    joinDate: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
                    lastLogin: new Date().toISOString()
                },
                {
                    id: 'user4',
                    username: '天气预报员',
                    qqNumber: '321654987',
                    password: '123456',
                    avatar: 'https://randomuser.me/api/portraits/women/4.jpg',
                    role: 'user',
                    status: 'muted',
                    joinDate: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
                    lastLogin: new Date().toISOString()
                },
                {
                    id: 'admin1',
                    username: '我就是天才',
                    qqNumber: '189203615',
                    password: '189203615aazz',
                    avatar: 'https://randomuser.me/api/portraits/women/2.jpg',
                    role: 'admin',
                    status: 'normal',
                    joinDate: new Date(Date.now() - 365 * 24 * 60 * 60 * 1000).toISOString(),
                    lastLogin: new Date().toISOString()
                }
            ];
            
            // 保存用户数据
            localStorage.setItem('users', JSON.stringify(users));
            
            log('已创建5个测试用户（4个普通用户，1个管理员）', 'success');
            log('管理员账号：用户名=我就是天才，密码=189203615aazz', 'info');
            log('普通用户账号：QQ=123456789，密码=123456（其他用户QQ请查看代码）', 'info');
        }
        
        // 创建测试举报
        function createTestReports() {
            // 清除现有举报数据
            localStorage.removeItem('reports');
            
            // 获取用户数据
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            if (users.length === 0) {
                log('请先创建测试用户', 'error');
                return;
            }
            
            // 创建测试举报
            const reports = [
                {
                    id: 'report1',
                    reporterId: 'user1',
                    reportedUsername: '违规用户01',
                    reportedQq: '456789123',
                    group: '江西气象爱好者',
                    violationType: '辱骂/侮辱他人',
                    otherReason: '',
                    description: '该用户在群内发布辱骂他人的言论，严重影响群内氛围。',
                    evidence: ['evidence1.jpg', 'evidence2.jpg'],
                    status: 'pending',
                    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                    updatedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 'report2',
                    reporterId: 'user2',
                    reportedUsername: '违规用户01',
                    reportedQq: '456789123',
                    group: '粤东气象爱好者',
                    violationType: '虚假/谣言信息',
                    otherReason: '',
                    description: '该用户发布虚假的天气预报信息，误导其他群成员。',
                    evidence: ['evidence3.jpg'],
                    status: 'processing',
                    createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
                    updatedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 'report3',
                    reporterId: 'user4',
                    reportedUsername: '违规用户02',
                    reportedQq: '789123456',
                    group: '江西气象爱好者',
                    violationType: '无关的广告信息',
                    otherReason: '',
                    description: '该用户在群内发布与气象无关的广告信息，刷屏影响正常交流。',
                    evidence: ['evidence4.jpg', 'evidence5.jpg', 'evidence6.jpg'],
                    status: 'resolved',
                    result: '确认违规',
                    processingNotes: '已对被举报人进行警告处理，并删除违规内容。',
                    createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                    updatedAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 'report4',
                    reporterId: 'user1',
                    reportedUsername: '天气预报员',
                    reportedQq: '321654987',
                    group: '粤东气象爱好者',
                    violationType: '政治敏感',
                    otherReason: '',
                    description: '该用户在群内发布涉及政治敏感的内容，违反社区规定。',
                    evidence: ['evidence7.jpg'],
                    status: 'resolved',
                    result: '确认违规',
                    processingNotes: '已对被举报人进行禁言7天处理。',
                    createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                    updatedAt: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 'report5',
                    reporterId: 'user2',
                    reportedUsername: '气象爱好者02',
                    reportedQq: '654987321',
                    group: '江西气象爱好者',
                    violationType: '其他',
                    otherReason: '发布不当表情包',
                    description: '该用户在群内发布不当表情包，影响群内氛围。',
                    evidence: ['evidence8.jpg'],
                    status: 'resolved',
                    result: '不构成违规',
                    processingNotes: '经核查，该表情包不构成违规，已告知举报人。',
                    createdAt: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
                    updatedAt: new Date(Date.now() - 9 * 24 * 60 * 60 * 1000).toISOString()
                }
            ];
            
            // 保存举报数据
            localStorage.setItem('reports', JSON.stringify(reports));
            
            log('已创建5条测试举报记录', 'success');
            log('包含待处理、处理中、已处理等不同状态的举报', 'info');
        }
        
        // 创建测试处罚
        function createTestPunishments() {
            // 清除现有处罚数据
            localStorage.removeItem('punishments');
            
            // 获取用户数据
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            if (users.length === 0) {
                log('请先创建测试用户', 'error');
                return;
            }
            
            // 创建测试处罚
            const punishments = [
                {
                    id: 'punish1',
                    userId: 'user3',
                    reason: '在群内发布辱骂他人的言论，严重违反社区规定',
                    type: 'ban',
                    duration: 0, // 永久
                    startTime: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
                    endTime: null,
                    status: 'active',
                    appealStatus: 'pending',
                    appealResponse: '',
                    createdBy: 'admin1'
                },
                {
                    id: 'punish2',
                    userId: 'user4',
                    reason: '发布涉及政治敏感的内容，违反社区规定',
                    type: 'mute',
                    duration: 10080, // 7天
                    startTime: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
                    endTime: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString(),
                    status: 'active',
                    appealStatus: null,
                    appealResponse: '',
                    createdBy: 'admin1'
                },
                {
                    id: 'punish3',
                    userId: 'user3',
                    reason: '发布虚假的天气预报信息，误导其他群成员',
                    type: 'warning',
                    duration: 0, // 警告
                    startTime: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
                    endTime: null,
                    status: 'expired',
                    appealStatus: 'rejected',
                    appealResponse: '经复核，原处罚决定事实清楚、依据充分，申诉理由不成立。',
                    createdBy: 'admin1'
                },
                {
                    id: 'punish4',
                    userId: 'user1',
                    reason: '在群内发布无关的广告信息，影响正常交流',
                    type: 'mute',
                    duration: 1440, // 1天
                    startTime: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),
                    endTime: new Date().toISOString(),
                    status: 'expired',
                    appealStatus: 'approved',
                    appealResponse: '经复核，您的行为不构成违规或情节轻微，原处罚决定予以撤销。',
                    createdBy: 'admin1'
                }
            ];
            
            // 保存处罚数据
            localStorage.setItem('punishments', JSON.stringify(punishments));
            
            log('已创建4条测试处罚记录', 'success');
            log('包含封禁、禁言、警告等不同类型的处罚', 'info');
        }
        
        // 创建测试申诉
        function createTestAppeals() {
            // 清除现有申诉数据
            localStorage.removeItem('appeals');
            
            // 获取用户数据和处罚数据
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const punishments = JSON.parse(localStorage.getItem('punishments') || '[]');
            
            if (users.length === 0) {
                log('请先创建测试用户', 'error');
                return;
            }
            
            if (punishments.length === 0) {
                log('请先创建测试处罚', 'error');
                return;
            }
            
            // 创建测试申诉
            const appeals = [
                {
                    id: 'appeal1',
                    punishmentId: 'punish1',
                    userId: 'user3',
                    description: '我没有发布辱骂他人的言论，这是一场误会。我只是在讨论气象数据时使用了专业术语，可能被误解为辱骂。请管理员重新审核。',
                    evidence: ['appeal1.jpg', 'appeal2.jpg'],
                    status: 'pending',
                    response: '',
                    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                    updatedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 'appeal2',
                    punishmentId: 'punish3',
                    userId: 'user3',
                    description: '我发布的天气预报信息是基于可靠来源的，并非虚假信息。可能是因为预报时间与实际天气变化有出入，但这属于正常的气象预报误差范围，不应被视为虚假信息。',
                    evidence: ['appeal3.jpg', 'appeal4.jpg'],
                    status: 'rejected',
                    response: '经复核，您发布的天气预报信息与官方发布的信息存在明显差异，且未注明信息来源，已构成虚假信息。申诉理由不成立，原处罚决定维持不变。',
                    createdAt: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
                    updatedAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 'appeal3',
                    punishmentId: 'punish4',
                    userId: 'user1',
                    description: '我发布的内容是与气象相关的产品推荐，并非无关广告。这些产品可以帮助群成员更好地观测天气，提高气象观测的准确性。',
                    evidence: ['appeal5.jpg'],
                    status: 'approved',
                    response: '经复核，您发布的内容确实与气象观测有一定关联，且未造成严重干扰。原处罚决定予以撤销。',
                    createdAt: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
                    updatedAt: new Date(Date.now() - 19 * 24 * 60 * 60 * 1000).toISOString()
                }
            ];
            
            // 保存申诉数据
            localStorage.setItem('appeals', JSON.stringify(appeals));
            
            log('已创建3条测试申诉记录', 'success');
            log('包含申诉中、申诉通过、申诉驳回等不同状态的申诉', 'info');
        }
        
        // 清除所有数据
        function clearAllData() {
            if (confirm('确定要清除所有测试数据吗？此操作不可撤销！')) {
                localStorage.removeItem('users');
                localStorage.removeItem('reports');
                localStorage.removeItem('punishments');
                localStorage.removeItem('appeals');
                localStorage.removeItem('currentUser');
                
                log('已清除所有测试数据', 'warning');
            }
        }
        
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 绑定按钮事件
            document.getElementById('create-users').addEventListener('click', createTestUsers);
            document.getElementById('create-reports').addEventListener('click', createTestReports);
            document.getElementById('create-punishments').addEventListener('click', createTestPunishments);
            document.getElementById('create-appeals').addEventListener('click', createTestAppeals);
            document.getElementById('clear-data').addEventListener('click', clearAllData);
        });
    </script>
</body>
</html>
